---
// SSGとして事前ビルドする（output: 'server' でもこのページは静的）
export const prerender = true;

import Layout from "../layouts/Layout.astro";
import Counter from "../components/Counter.tsx";

const today = new Date().toLocaleDateString("ja-JP");
---

<Layout title="Hello Astro!">
  <h1>Hello Astro!</h1>
  <p>今日は {today} です</p>
  <p>Astro学習はじめました！</p>

  <h2>1. 素のJS版カウンター（scriptタグ）</h2>
  <div class="counter">
    <button id="decrement">-</button>
    <span id="count">0</span>
    <button id="increment">+</button>
  </div>

  <h2>2. React版カウンター（Island）</h2>
  {/* client:load を付けるとこのコンポーネントが Island になる */}
  {/* ブラウザにReactのJSが送られ、インタラクティブになる */}
  <Counter client:load />

  <h2>3. React版（client:なし）</h2>
  {/* client: ディレクティブなし = HTMLだけ出力、JSは送られない */}
  {/* ボタンを押しても動かない！ */}
  <Counter />

  <script>
    const count = document.getElementById("count")!;
    const increment = document.getElementById("increment")!;
    const decrement = document.getElementById("decrement")!;

    let value = 0;

    increment.addEventListener("click", () => {
      value++;
      count.textContent = String(value);
    });

    decrement.addEventListener("click", () => {
      value--;
      count.textContent = String(value);
    });
  </script>
</Layout>

<style>
  .counter {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-top: 1rem;
  }

  .counter button {
    font-size: 1.5rem;
    width: 2.5rem;
    height: 2.5rem;
    cursor: pointer;
  }

  #count {
    font-size: 1.5rem;
    min-width: 2rem;
    text-align: center;
  }
</style>
